<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.seig.backend.storage.mapper.WarehouseMapper">

    <resultMap id="BaseResultMap" type="com.seig.backend.storage.entity.Warehouse">
        <id column="warehouse_id" jdbcType="INTEGER" property="warehouseId"/>
        <result column="warehouse_code" jdbcType="VARCHAR" property="warehouseCode"/>
        <result column="warehouse_name" jdbcType="VARCHAR" property="warehouseName"/>
        <result column="warehouse_type" jdbcType="TINYINT" property="warehouseType"/>
        <result column="address" jdbcType="VARCHAR" property="address"/>
        <result column="manager_id" jdbcType="VARCHAR" property="managerId"/>
        <result column="manager_name" jdbcType="VARCHAR" property="managerName"/>
        <result column="contact_phone" jdbcType="VARCHAR" property="contactPhone"/>
        <result column="temp_min" jdbcType="DECIMAL" property="tempMin"/>
        <result column="temp_max" jdbcType="DECIMAL" property="tempMax"/>
        <result column="humidity_min" jdbcType="DECIMAL" property="humidityMin"/>
        <result column="humidity_max" jdbcType="DECIMAL" property="humidityMax"/>
        <result column="humidity_range" jdbcType="VARCHAR" property="humidityRange"/>
        <result column="status" jdbcType="TINYINT" property="status"/>
        <result column="parent_warehouse_id" jdbcType="INTEGER" property="parentWarehouseId"/>
        <result column="created_time" jdbcType="TIMESTAMP" property="createdTime"/>
        <result column="updated_time" jdbcType="TIMESTAMP" property="updatedTime"/>
        <result column="created_by" jdbcType="VARCHAR" property="createdBy"/>
        <result column="updated_by" jdbcType="VARCHAR" property="updatedBy"/>
        <result column="remark" jdbcType="VARCHAR" property="remark"/>
    </resultMap>

    <sql id="Base_Column_List">
        warehouse_id, warehouse_code, warehouse_name, warehouse_type, address,
        manager_id, manager_name, contact_phone, temp_min, temp_max,
        humidity_min, humidity_max, humidity_range, status, parent_warehouse_id,
        created_time, updated_time, created_by, updated_by, remark
    </sql>

    <select id="selectById" parameterType="java.lang.Integer" resultMap="BaseResultMap">
        SELECT
        <include refid="Base_Column_List"/>
        FROM warehouse
        WHERE warehouse_id = #{warehouseId}
    </select>

    <select id="selectAll" resultMap="BaseResultMap">
        SELECT
        <include refid="Base_Column_List"/>
        FROM warehouse
        ORDER BY warehouse_id DESC
    </select>

    <insert id="insert" parameterType="com.seig.backend.storage.entity.Warehouse" useGeneratedKeys="true" keyProperty="warehouseId">
        INSERT INTO warehouse
        <trim prefix="(" suffix=")" suffixOverrides=",">
            <if test="warehouseCode != null and warehouseCode != ''">warehouse_code,</if>
            <if test="warehouseName != null and warehouseName != ''">warehouse_name,</if>
            <if test="warehouseType != null">warehouse_type,</if>
            <if test="address != null and address != ''">address,</if>
            <if test="managerId != null and managerId != ''">manager_id,</if>
            <if test="managerName != null and managerName != ''">manager_name,</if>
            <if test="contactPhone != null and contactPhone != ''">contact_phone,</if>
            <if test="tempMin != null">temp_min,</if>
            <if test="tempMax != null">temp_max,</if>
            <if test="humidityMin != null">humidity_min,</if>
            <if test="humidityMax != null">humidity_max,</if>
            <if test="humidityRange != null and humidityRange != ''">humidity_range,</if>
            <if test="status != null">status,</if>
            <if test="parentWarehouseId != null">parent_warehouse_id,</if>
            <if test="createdBy != null and createdBy != ''">created_by,</if>
            <if test="updatedBy != null and updatedBy != ''">updated_by,</if>
            <if test="remark != null and remark != ''">remark,</if>
        </trim>
        <trim prefix="VALUES (" suffix=")" suffixOverrides=",">
            <if test="warehouseCode != null and warehouseCode != ''">#{warehouseCode},</if>
            <if test="warehouseName != null and warehouseName != ''">#{warehouseName},</if>
            <if test="warehouseType != null">#{warehouseType},</if>
            <if test="address != null and address != ''">#{address},</if>
            <if test="managerId != null and managerId != ''">#{managerId},</if>
            <if test="managerName != null and managerName != ''">#{managerName},</if>
            <if test="contactPhone != null and contactPhone != ''">#{contactPhone},</if>
            <if test="tempMin != null">#{tempMin},</if>
            <if test="tempMax != null">#{tempMax},</if>
            <if test="humidityMin != null">#{humidityMin},</if>
            <if test="humidityMax != null">#{humidityMax},</if>
            <if test="humidityRange != null and humidityRange != ''">#{humidityRange},</if>
            <if test="status != null">#{status},</if>
            <if test="parentWarehouseId != null">#{parentWarehouseId},</if>
            <if test="createdBy != null and createdBy != ''">#{createdBy},</if>
            <if test="updatedBy != null and updatedBy != ''">#{updatedBy},</if>
            <if test="remark != null and remark != ''">#{remark},</if>
        </trim>
    </insert>

    <update id="update" parameterType="com.seig.backend.storage.entity.Warehouse">
        UPDATE warehouse
        <set>
            <if test="warehouseCode != null and warehouseCode != ''">warehouse_code = #{warehouseCode},</if>
            <if test="warehouseName != null and warehouseName != ''">warehouse_name = #{warehouseName},</if>
            <if test="warehouseType != null">warehouse_type = #{warehouseType},</if>
            <if test="address != null and address != ''">address = #{address},</if>
            <if test="managerId != null and managerId != ''">manager_id = #{managerId},</if>
            <if test="managerName != null and managerName != ''">manager_name = #{managerName},</if>
            <if test="contactPhone != null and contactPhone != ''">contact_phone = #{contactPhone},</if>
            <if test="tempMin != null">temp_min = #{tempMin},</if>
            <if test="tempMax != null">temp_max = #{tempMax},</if>
            <if test="humidityMin != null">humidity_min = #{humidityMin},</if>
            <if test="humidityMax != null">humidity_max = #{humidityMax},</if>
            <if test="humidityRange != null and humidityRange != ''">humidity_range = #{humidityRange},</if>
            <if test="status != null">status = #{status},</if>
            <if test="parentWarehouseId != null">parent_warehouse_id = #{parentWarehouseId},</if>
            <if test="updatedBy != null and updatedBy != ''">updated_by = #{updatedBy},</if>
            <if test="remark != null and remark != ''">remark = #{remark},</if>
            updated_time = NOW()
        </set>
        WHERE warehouse_id = #{warehouseId}
    </update>

    <delete id="deleteById" parameterType="java.lang.Integer">
        DELETE FROM warehouse
        WHERE warehouse_id = #{warehouseId}
    </delete>
</mapper>
